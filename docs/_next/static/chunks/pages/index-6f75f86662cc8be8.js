(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(9239)}])},947:function(a,b,c){"use strict";c.d(b,{Z:function(){return p}});var d=c(4924),e=c(5893),f=c(1664),g=c.n(f),h=c(1163),i=c(2711),j=c(5498),k=c(4184),l=c.n(k),m=c(2371),n=c.n(m),o=JSON.parse('[{"label":"Home","url":"/","menues":["main","footer"]},{"label":"Page","url":"/page","menues":["main","footer"]}]');function p(){var a=(0,h.useRouter)();return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(i.Z,{className:l()(n().navbar,"px-3"),sticky:"top",expand:"lg",children:[(0,e.jsx)(g(),{href:"/",children:(0,e.jsx)("a",{className:l()(n().logo,"no-hover"),children:"Project Title"})}),(0,e.jsx)(i.Z.Toggle,{"aria-controls":"abilitiamo-main-navbar"}),(0,e.jsx)(i.Z.Collapse,{children:(0,e.jsx)(j.Z,{className:l()("ms-auto","align-items-left"),children:o.filter(function(a){return a.menues.indexOf("main")> -1}).map(function(b){return(0,e.jsx)(g(),{href:b.url,children:(0,e.jsx)("a",{className:l()("nav-link","no-hover",n().item,(0,d.Z)({},"".concat(n().active),a.pathname==b.url),(0,d.Z)({},"".concat(n().specificPage),"/dona-ora"===b.url)),children:b.label})},b.label)})})})]})})}},9239:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return aA}});var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=c(5893),A=c(9008),B=c.n(A);c(947);var C,D,E=c(603),F=c(8804),G=c.n(F),H=c(7294),I=c(1163),J=c(9896),K=c(4184),L=c.n(K),M={},N={},O=175,P=500,Q=null,R=J.PUr().range([1,.5*O]),S=J.PKp(["mapped","authorized","photographed"],["#C3C5C3","#F8FF0E","#22B8B4"]),T=150;function U(a){return a.forEach(function(a){a[1].forEach(function(a){var b=a[1].find(function(a){return"photographed"===a.group});b.innerRadius=0,b.outerRadius=R(b.valueIncremental);var c=a[1].find(function(a){return"authorized"===a.group});c.innerRadius=b.outerRadius,c.outerRadius=R(c.valueIncremental);var d=a[1].find(function(a){return"mapped"===a.group});d&&(d.innerRadius=c.outerRadius,d.outerRadius=R(d.valueIncremental))})}),a}function V(a,b,c,d){var e=(d-90)*Math.PI/180;return{x:a+c*Math.cos(e),y:b+c*Math.sin(e)}}function W(a,b,c,d,e){var f=V(a,b,c,e),g=V(a,b,c,d),h=e-d<=180?"0":"1";return["M",f.x,f.y,"A",c,c,0,h,0,g.x,g.y].join(" ")}function X(a){var b,c=0,d=0;if(0===a.innerRadius){var e=a.outerRadius,f=0,g=j,h=V(c,d,a.outerRadius,g),i=V(c,d,a.outerRadius,f),k=g-f<=180?"0":"1";b=["M",c,d,"L",h.x,h.y,"A",e,e,0,k,0,i.x,i.y,"Z",].join(" ")}else{var l=a.outerRadius,m=0,n=j,o=V(c,d,l,n),p=V(c,d,l,m),q=n-m<=180?"0":"1",r=a.innerRadius,s=0,t=j,u=V(c,d,r,t),v=V(c,d,r,s),w=t-s<=180?"0":"1";b=["M",u.x,u.y,"L",o.x,o.y,"A",l,l,0,q,0,p.x,p.y,"L",v.x,v.y,"A",r,r,0,w,1,u.x,u.y,"Z",].join(" ")}return b}function Y(a,b){var c=arguments.length>2&& void 0!==arguments[2]&&arguments[2];if(c){var d=.1*C+Math.random()*C*.8,e=.1*D+Math.random()*D*.8;return"translate(".concat(d,", ").concat(e,")")}var f=b%N.columns*O+O/2+M.left,g=Math.floor(b/N.columns)*O+O/2+M.top;return"translate(".concat(f,",").concat(g,") rotate(",0,")")}function Z(a){var b=a[1][a[1].length-1][1][0].valueIncremental,c=-1,d=Q.filter(function(a){return a<=b}).length+c,e=Math.max(0,d-3),f=Q.slice(e,d);return f.push(b),f}function $(a){return 1===a?"":a>=1e3?(a=(a/1e3).toFixed(1))+"K":a}var _=c(682),aa=c(1608),ab=c(1555),ac=c(8576),ad=c.n(ac),ae={lightBlue:"#DDF7FF",terrain:"#ECE5E0",white:"#ffffff",onWikidata:"#C3C5C3",inContest:"#F8FF0E",photographed:"#22B8B4",authorized:"#F8FF0E",mapped:"#C3C5C3"},af=35,ag=150,ah=function(a,b){k=ag/a[1].length,b.selectAll(".collisionArea").data(function(a){return[a]}).join("circle").attr("class","collisionArea").attr("stroke-width","var(--stroke-width)").attr("r",af),b.selectAll(".snapshot").data(function(a){return a[1]},function(a){return a[0]}).join("g").attr("class","snapshot").attr("transform",function(a,b){return" rotate(".concat(-ag/2+k*b,")")}).selectAll(".status").data(function(a){return a[1]},function(a){return a.group}).join(function(a){return a.append("path").attr("class","status").attr("fill",function(a){return ae[a.group]}).attr("d",function(a){return aj(a)})},function(a){return a.attr("fill",function(a){return ae[a.group]}).attr("d",function(a){return aj(a)})},function(a){return a}),b.selectAll(".label").data(function(a){return[a[0]]}).join("text").attr("text-anchor","middle").attr("font-size","var(--label-size)").attr("class","label").text(function(a){return a})};function ai(a,b,c,d){var e=(d-90)*Math.PI/180;return{x:a+c*Math.cos(e),y:b+c*Math.sin(e)}}function aj(a){var b,c=0,d=0;if(0===a.innerRadius){var e=a.outerRadius,f=0,g=k-1,h=ai(c,d,a.outerRadius,g),i=ai(c,d,a.outerRadius,f),j=g-f<=180?"0":"1";b=["M",c,d,"L",h.x,h.y,"A",e,e,0,j,0,i.x,i.y,"Z"].join(" ")}else{var l=a.outerRadius,m=0,n=k-1,o=ai(c,d,l,n),p=ai(c,d,l,m),q=n-m<=180?"0":"1",r=a.innerRadius,s=0,t=k-1,u=ai(c,d,r,t),v=ai(c,d,r,s),w=t-s<=180?"0":"1";b=["M",u.x,u.y,"L",o.x,o.y,"A",l,l,0,q,0,p.x,p.y,"L",v.x,v.y,"A",r,r,0,w,1,u.x,u.y,"Z",].join(" ")}return b}var ak=J.PUr().range([1,2*af]),al=function(a,b){console.log("initialize",b);var c=(l=J.Ys(a)).node().getBoundingClientRect();m=c.width,n=c.height,o=l.select(".bgRect"),o.empty()&&(o=l.append("rect").classed("bgRect",!0)),o.attr("fill",ae.lightBlue).attr("width",m).attr("height",n).attr("pointer-events","none"),s=l.select(".main-g"),s.empty()&&(s=l.append("g").classed("main-g",!0)),t=s.select(".g_geographies"),t.empty()&&(t=s.append("g").classed("g_geographies",!0)),v=s.select(".g_ventagli"),v.empty()&&(v=s.append("g").classed("g_ventagli",!0)),p=J.mw4().fitSize([m,n],b.geographies),q=J.l49(p),y=b.geographies.features.map(function(a){var c=a.properties[b.labelKey],d=q.centroid(a);return{area:c,centroid:d}}),b.ventagli.forEach(function(a){var b=y.find(function(b){return b.area===a[0]});b&&(a.x=b.centroid[0],a.y=b.centroid[1])}),r=J.sPX().scaleExtent([1,1024]).extent([[0,0],[m,n],]).on("zoom",function(a){return an(a.transform)}),l.call(r).call(r.transform,J.CRH),am(b)},am=function(a){console.log("update",a.extent),ak.domain(a.extent),a.ventagli=ap(a.ventagli),u=t.selectAll(".area").data(a.geographies.features).join("path").attr("class","area").attr("fill",ae.terrain).attr("stroke",ae.white).attr("stroke-width","var(--stroke-width)").attr("stroke-linecap","round").attr("stroke-linejoin","round").attr("d",function(a){return q(a)}),w=v.selectAll(".ventaglio").data(a.ventagli,function(a){return a[0]}).join(function(a){return a.append("g").attr("class","ventaglio").each(function(a){ah(a,J.Ys(this))})},function(a){return a.each(function(a){ah(a,J.Ys(this))})},function(a){return a}),x.nodes(a.ventagli),x.alpha(1),x.tick(120),ao()};function an(a){s.attr("transform",a),a.x,a.y;var b=a.k;document.documentElement.style.setProperty("--stroke-width",1/b),document.documentElement.style.setProperty("--label-size",10/b)}var ao=function(){w.attr("transform",function(a){return"translate(".concat(a.x,", ").concat(a.y,")")})};function ap(a){return a.forEach(function(a){a[1].forEach(function(a){var b=a[1].find(function(a){return"photographed"===a.group});b.innerRadius=0,b.outerRadius=ak(b.valueIncremental);var c=a[1].find(function(a){return"authorized"===a.group});c.innerRadius=b.outerRadius,c.outerRadius=ak(c.valueIncremental);var d=a[1].find(function(a){return"mapped"===a.group});d&&(d.innerRadius=c.outerRadius,d.outerRadius=ak(d.valueIncremental))})}),a}function aq(a){var b=a.data,c=(0,H.useRef)();return(0,H.useEffect)(function(){b&&al(c.current,b)},[b]),(0,z.jsx)("div",{className:L()(ad().map),children:(0,z.jsx)("svg",{ref:c})})}x=J.A4v().force("x",J.RUJ(function(a){return a.x})).force("y",J.Mrm(function(a){return a.y})).force("collide",J.Hh().radius(af)).on("tick",ao).stop();var ar=c(6370),as=c(5312);function at(a){var b=a.label,c=a.items,d=a.transferSelection,e={label:a.defaultLabel},f=(0,H.useState)(e),g=f[0],h=f[1];return(0,z.jsxs)("div",{className:L()("d-flex","justify-content-start","align-items-center"),children:[b&&(0,z.jsx)("span",{children:b}),(0,z.jsxs)(as.Z,{className:L()("ms-3"),children:[(0,z.jsx)(as.Z.Toggle,{variant:"success",id:"dropdown-basic",size:"sm",children:g.label}),(0,z.jsxs)(as.Z.Menu,{children:[c.map(function(a,b){return(0,z.jsx)(as.Z.Item,{eventKey:b,onClick:function(){h(a),d(a)},children:a.label},b)}),(0,z.jsx)(as.Z.Divider,{}),(0,z.jsx)(as.Z.Item,{eventKey:c.length,onClick:function(){h(e),d(null)},children:"None"})]})]})]})}at.defaultProps={transferSelection:function(a){return console.warn("No function specified for rtansferring the selection to parent. Value:",a)},defaultLabel:"Select an item",items:[{label:"action 1"},{label:"action 2"},{label:"action 3"},{label:"action 4"}]};var au=c(2914);function av(a){var b=a.label,c=a.initialDate,d=a.transferSelection;return(0,z.jsxs)(au.Z.Group,{controlId:"date",className:L()("d-flex","justify-content-start","align-items-center"),onChange:function(a){return d(a.target.value)},children:[b&&(0,z.jsx)(au.Z.Label,{children:b}),(0,z.jsx)(au.Z.Control,{type:"date",name:"date",placeholder:"Pick a date",defaultValue:c,size:"sm"})]})}av.defaultProps={initialDate:"2012-01-01",transferSelection:function(a){return console.warn("No function specified for rtansferring the selection to parent. Value:",a)}};var aw=c(5005);function ax(a){var b=a.label,c=a.onClickAction,d=a.content;return(0,z.jsxs)("div",{className:L()("d-flex","justify-content-start","align-items-center"),children:[b&&(0,z.jsx)("span",{children:b}),(0,z.jsx)(aw.Z,{className:L()("ms-3"),size:"sm",onClick:function(a){return c(a)},children:d})]})}ax.defaultProps={initialDate:"2012-01-01",onClickAction:function(a){return console.warn("No function specified for onClickAction. Value:",a)}};var ay=c(3750),az=function(){var a=(0,I.useRouter)(),b=(a.asPath,a.basePath),c=(0,H.useState)(),d=c[0],e=c[1],f=(0,H.useState)(),g=f[0],h=f[1],i=(0,H.useState)(),j=i[0],k=i[1],l=(0,H.useState)(),m=l[0],n=l[1],o=(0,H.useState)(!1),p=o[0],q=o[1],r=(0,H.useState)(),s=(r[0],r[1]);return(0,H.useEffect)(function(){var a=J.AVB("".concat(b,"/api-data-simulated/geometries/Reg01012022_WGS84_topoJSON.json")),c=J.AVB("".concat(b,"/api-data-simulated/geometries/ProvCM01012022_WGS84_topoJSON.json")),d=J.AVB("".concat(b,"/api-data-simulated/geometries/Com01012022_WGS84_topoJSON.json")),f=J.AVB("".concat(b,"/api-data-simulated/interval-12months.aggregation-region.json"));Promise.all([a,c,d,f]).then(function(a){var b=(0,E.Z)(a,4),c=b[0],d=b[1],f=b[2],g=b[3],i=Object.keys(c.objects)[0],j=(0,ar.Z)(c,c.objects[i]);h(j.features.map(function(a){return{label:a.properties.DEN_REG,code:a.properties.COD_REG}})),i=Object.keys(d.objects)[0];var l=(0,ar.Z)(d,d.objects[i]).features.map(function(a){return{label:a.properties.DEN_UTS,code:a.properties.COD_UTS,codeRegion:a.properties.COD_REG}});k(l),i=Object.keys(f.objects)[0];var m=(0,ar.Z)(f,f.objects[i]);n(m.features.map(function(a){return{label:a.properties.COMUNE,code:a.properties.PRO_COM,codeProvince:a.properties.COD_UTS,codeRegion:a.properties.COD_REG}})),console.log(m);var o=J.Fp7(g,function(a){return a[1][a[1].length-1][1][0].valueIncremental});e({ventagli:g,geographies:j,codeKey:"COD_REG",labelKey:"DEN_REG",extent:[0,o]})})},[]),(0,H.useEffect)(function(){var a=function(a){s([0,++b]),b>=d[0][1].length&&(c.stop(),q(!1))};if(d){var b=0,c=J.FG_(a,1250);p?(b=0,c.restart(function(b){return a(b)},1250)):c.stop()}},[d,p]),(0,z.jsx)(_.Z,{className:L()(G().vizController),fluid:!0,children:(0,z.jsxs)(aa.Z,{className:L()("h-100"),children:[(0,z.jsxs)(ab.Z,{className:L()("h-100"),md:3,xl:3,children:[(0,z.jsx)(at,{label:"Theme",defaultLabel:"All monuments"}),(0,z.jsx)(at,{items:g,defaultLabel:"Select a region"}),(0,z.jsx)(at,{items:j,defaultLabel:"Select a province"}),(0,z.jsx)(at,{items:m,defaultLabel:"Select a municipality"}),(0,z.jsx)(av,{label:"From"}),(0,z.jsx)(av,{label:"To"}),(0,z.jsx)("strong",{children:"ButtonGroup"}),(0,z.jsx)(ax,{label:"Save",content:(0,z.jsx)(ay.QNI,{})})]}),(0,z.jsx)(ab.Z,{className:L()("h-100"),children:(0,z.jsx)(aq,{data:d})})]})})};function aA(){return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(B(),{children:(0,z.jsx)("title",{children:"Home"})}),(0,z.jsx)(az,{})]})}},8576:function(a){a.exports={map:"MapVentagli_map__NmyTz"}},2371:function(a){a.exports={navbar:"Navigation_navbar__clCa1",logo:"Navigation_logo__AbP0d",item:"Navigation_item__j_Te9",specificPage:"Navigation_specificPage__k2gFH"}},8804:function(a){a.exports={vizController:"VisualizationController_vizController__KxPt2"}}},function(a){a.O(0,[13,458,867,774,888,179],function(){var b;return a(a.s=5557)}),_N_E=a.O()}])