(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(106)}])},947:function(a,b,c){"use strict";c.d(b,{Z:function(){return p}});var d=c(4924),e=c(5893),f=c(1664),g=c.n(f),h=c(1163),i=c(2419),j=c(8340),k=c(4184),l=c.n(k),m=c(2371),n=c.n(m),o=JSON.parse('[{"label":"Home","url":"/","menues":["main","footer"]},{"label":"Page","url":"/page","menues":["main","footer"]}]');function p(){var a=(0,h.useRouter)();return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(i.Z,{className:l()(n().navbar,"px-3"),sticky:"top",expand:"lg",children:[(0,e.jsx)(g(),{href:"/",children:(0,e.jsx)("a",{className:l()(n().logo,"no-hover"),children:"Project Title"})}),(0,e.jsx)(i.Z.Toggle,{"aria-controls":"abilitiamo-main-navbar"}),(0,e.jsx)(i.Z.Collapse,{children:(0,e.jsx)(j.Z,{className:l()("ms-auto","align-items-left"),children:o.filter(function(a){return a.menues.indexOf("main")> -1}).map(function(b){return(0,e.jsx)(g(),{href:b.url,children:(0,e.jsx)("a",{className:l()("nav-link","no-hover",n().item,(0,d.Z)({},"".concat(n().active),a.pathname==b.url),(0,d.Z)({},"".concat(n().specificPage),"/dona-ora"===b.url)),children:b.label})},b.label)})})})]})})}},106:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return as}});var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=c(5893),A=c(9008),B=c.n(A);c(947);var C,D,E=c(8804),F=c.n(E),G=c(7294),H=c(1163),I=c(9896),J=c(4184),K=c.n(J),L={},M={},N=175,O=500,P=null,Q=I.PUr().range([1,.5*N]),R=I.PKp(["mapped","authorized","photographed"],["#C3C5C3","#F8FF0E","#22B8B4"]),S=150;function T(a){return a.forEach(function(a){a[1].forEach(function(a){var b=a[1].find(function(a){return"photographed"===a.group});b.innerRadius=0,b.outerRadius=Q(b.valueIncremental);var c=a[1].find(function(a){return"authorized"===a.group});c.innerRadius=b.outerRadius,c.outerRadius=Q(c.valueIncremental);var d=a[1].find(function(a){return"mapped"===a.group});d&&(d.innerRadius=c.outerRadius,d.outerRadius=Q(d.valueIncremental))})}),a}function U(a,b,c,d){var e=(d-90)*Math.PI/180;return{x:a+c*Math.cos(e),y:b+c*Math.sin(e)}}function V(a,b,c,d,e){var f=U(a,b,c,e),g=U(a,b,c,d),h=e-d<=180?"0":"1";return["M",f.x,f.y,"A",c,c,0,h,0,g.x,g.y].join(" ")}function W(a){var b,c=0,d=0;if(0===a.innerRadius){var e=a.outerRadius,f=0,g=j,h=U(c,d,a.outerRadius,g),i=U(c,d,a.outerRadius,f),k=g-f<=180?"0":"1";b=["M",c,d,"L",h.x,h.y,"A",e,e,0,k,0,i.x,i.y,"Z",].join(" ")}else{var l=a.outerRadius,m=0,n=j,o=U(c,d,l,n),p=U(c,d,l,m),q=n-m<=180?"0":"1",r=a.innerRadius,s=0,t=j,u=U(c,d,r,t),v=U(c,d,r,s),w=t-s<=180?"0":"1";b=["M",u.x,u.y,"L",o.x,o.y,"A",l,l,0,q,0,p.x,p.y,"L",v.x,v.y,"A",r,r,0,w,1,u.x,u.y,"Z",].join(" ")}return b}function X(a,b){var c=arguments.length>2&& void 0!==arguments[2]&&arguments[2];if(c){var d=.1*C+Math.random()*C*.8,e=.1*D+Math.random()*D*.8;return"translate(".concat(d,", ").concat(e,")")}var f=b%M.columns*N+N/2+L.left,g=Math.floor(b/M.columns)*N+N/2+L.top;return"translate(".concat(f,",").concat(g,") rotate(",0,")")}function Y(a){var b=a[1][a[1].length-1][1][0].valueIncremental,c=-1,d=P.filter(function(a){return a<=b}).length+c,e=Math.max(0,d-3),f=P.slice(e,d);return f.push(b),f}function Z(a){return 1===a?"":a>=1e3?(a=(a/1e3).toFixed(1))+"K":a}var $=c(682),_=c(1608),aa=c(1555),ab=c(8576),ac=c.n(ab),ad={lightBlue:"#DDF7FF",terrain:"#ECE5E0",white:"#ffffff",onWikidata:"#C3C5C3",inContest:"#F8FF0E",photographed:"#22B8B4",authorized:"#F8FF0E",mapped:"#C3C5C3"},ae=35,af=150,ag=function(a,b){k=af/a[1].length,b.selectAll(".collisionArea").data(function(a){return[a]}).join("circle").attr("class","collisionArea").attr("stroke-width","var(--stroke-width)").attr("r",ae),b.selectAll(".snapshot").data(function(a){return a[1]},function(a){return a[0]}).join("g").attr("class","snapshot").attr("transform",function(a,b){return" rotate(".concat(-af/2+k*b,")")}).selectAll(".status").data(function(a){return a[1]},function(a){return a.group}).join(function(a){return a.append("path").attr("class","status").attr("fill",function(a){return ad[a.group]}).attr("d",function(a){return ai(a)})},function(a){return a.attr("fill",function(a){return ad[a.group]}).attr("d",function(a){return ai(a)})},function(a){return a}),b.selectAll(".label").data(function(a){return[a[0]]}).join("text").attr("text-anchor","middle").attr("font-size","var(--label-size)").attr("class","label").attr("y","var(--label-size)").text(function(a){return a})};function ah(a,b,c,d){var e=(d-90)*Math.PI/180;return{x:a+c*Math.cos(e),y:b+c*Math.sin(e)}}function ai(a){var b,c=0,d=0;if(0===a.innerRadius){var e=a.outerRadius,f=0,g=k-1,h=ah(c,d,a.outerRadius,g),i=ah(c,d,a.outerRadius,f),j=g-f<=180?"0":"1";b=["M",c,d,"L",h.x,h.y,"A",e,e,0,j,0,i.x,i.y,"Z"].join(" ")}else{var l=a.outerRadius,m=0,n=k-1,o=ah(c,d,l,n),p=ah(c,d,l,m),q=n-m<=180?"0":"1",r=a.innerRadius,s=0,t=k-1,u=ah(c,d,r,t),v=ah(c,d,r,s),w=t-s<=180?"0":"1";b=["M",u.x,u.y,"L",o.x,o.y,"A",l,l,0,q,0,p.x,p.y,"L",v.x,v.y,"A",r,r,0,w,1,u.x,u.y,"Z",].join(" ")}return b}var aj=I.PUr().range([1,2*ae]),ak=function(a,b){console.log("initialize",b);var c=(l=I.Ys(a)).node().getBoundingClientRect();m=c.width,n=c.height,o=l.select(".bgRect"),o.empty()&&(o=l.append("rect").classed("bgRect",!0)),o.attr("fill",ad.lightBlue).attr("width",m).attr("height",n).attr("pointer-events","none"),s=l.select(".main-g"),s.empty()&&(s=l.append("g").classed("main-g",!0)),t=s.select(".g_geographies"),t.empty()&&(t=s.append("g").classed("g_geographies",!0)),v=s.select(".g_ventagli"),v.empty()&&(v=s.append("g").classed("g_ventagli",!0)),p=I.mw4().fitSize([m,n],b.geographies),q=I.l49(p),y=b.geographies.features.map(function(a){var c=a.properties[b.labelKey],d=q.centroid(a);return{area:c,centroid:d}}),b.ventagli.forEach(function(a){var b=y.find(function(b){return b.area===a[0]});b&&(a.x=b.centroid[0],a.y=b.centroid[1])}),r=I.sPX().scaleExtent([1,1024]).extent([[0,0],[m,n],]).on("zoom",function(a){return am(a.transform)}),l.call(r).call(r.transform,I.CRH),al(b)},al=function(a){console.log("update",a.extent),aj.domain(a.extent),a.ventagli=ao(a.ventagli),u=t.selectAll(".area").data(a.geographies.features).join("path").attr("class","area").attr("fill",ad.terrain).attr("stroke",ad.white).attr("stroke-width","var(--stroke-width)").attr("stroke-linecap","round").attr("stroke-linejoin","round").attr("d",function(a){return q(a)}),w=v.selectAll(".ventaglio").data(a.ventagli,function(a){return a[0]}).join(function(a){return a.append("g").attr("class","ventaglio").each(function(a){ag(a,I.Ys(this))})},function(a){return a.each(function(a){ag(a,I.Ys(this))})},function(a){return a}),x.nodes(a.ventagli),x.alpha(1),x.tick(120),an()};function am(a){s.attr("transform",a),a.x,a.y;var b=a.k;document.documentElement.style.setProperty("--stroke-width",1/b),document.documentElement.style.setProperty("--label-size",10/b)}var an=function(){w.attr("transform",function(a){return"translate(".concat(a.x,", ").concat(a.y,")")})};function ao(a){return a.forEach(function(a){a[1].forEach(function(a){var b=a[1].find(function(a){return"photographed"===a.group});b.innerRadius=0,b.outerRadius=aj(b.valueIncremental);var c=a[1].find(function(a){return"authorized"===a.group});c.innerRadius=b.outerRadius,c.outerRadius=aj(c.valueIncremental);var d=a[1].find(function(a){return"mapped"===a.group});d&&(d.innerRadius=c.outerRadius,d.outerRadius=aj(d.valueIncremental))})}),a}function ap(a){var b=a.data,c=(0,G.useRef)();return(0,G.useEffect)(function(){b&&ak(c.current,b)},[b]),(0,z.jsx)("div",{className:K()(ac().map),children:(0,z.jsx)("svg",{ref:c})})}x=I.A4v().force("x",I.RUJ(function(a){return a.x})).force("y",I.Mrm(function(a){return a.y})).force("collide",I.Hh().radius(ae)).on("tick",an).stop();var aq=c(6370),ar=function(){var a=(0,H.useRouter)(),b=(a.asPath,a.basePath),c=(0,G.useState)(),d=c[0],e=c[1],f=(0,G.useState)(!1),g=f[0],h=f[1],i=(0,G.useState)(),j=(i[0],i[1]),k=function(){h(!g)};return(0,G.useEffect)(function(){var a="".concat(b,"/api-data-simulated/geometries/Reg01012022_WGS84_topoJSON.json"),c="".concat(b,"/api-data-simulated/interval-12months.aggregation-region.json");Promise.all([I.AVB(a),I.AVB(c)]).then(function(a){var b=a[0],c=Object.keys(b.objects)[0],d=(0,aq.Z)(b,b.objects[c]),f=a[1],g=I.Fp7(f,function(a){return a[1][a[1].length-1][1][0].valueIncremental});e({ventagli:f,geographies:d,codeKey:"COD_REG",labelKey:"DEN_REG",extent:[0,g]})})},[]),(0,G.useEffect)(function(){var a=function(a){j([0,++b]),b>=d[0][1].length&&(c.stop(),h(!1))};if(d){var b=0,c=I.FG_(a,1250);g?(b=0,c.restart(function(b){return a(b)},1250)):c.stop()}},[d,g]),(0,z.jsx)($.Z,{className:K()(F().vizController),fluid:!0,children:(0,z.jsxs)(_.Z,{className:K()("h-100"),children:[(0,z.jsxs)(aa.Z,{className:K()("h-100"),md:3,xl:3,children:["sidebar",(0,z.jsx)("input",{type:"checkbox",checked:g,onChange:k})," ","Play"]}),(0,z.jsx)(aa.Z,{className:K()("h-100"),children:(0,z.jsx)(ap,{data:d})})]})})};function as(){return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(B(),{children:(0,z.jsx)("title",{children:"Home"})}),(0,z.jsx)(ar,{})]})}},8576:function(a){a.exports={map:"MapVentagli_map__NmyTz"}},2371:function(a){a.exports={navbar:"Navigation_navbar__clCa1",logo:"Navigation_logo__AbP0d",item:"Navigation_item__j_Te9",specificPage:"Navigation_specificPage__k2gFH"}},8804:function(a){a.exports={vizController:"VisualizationController_vizController__KxPt2"}}},function(a){a.O(0,[390,149,774,888,179],function(){var b;return a(a.s=5557)}),_N_E=a.O()}])